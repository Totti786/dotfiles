#!/usr/bin/env bash

rofi_command="rofi -theme $HOME/.config/rofi/themes/layouts.rasi"

# Variable passed to rofi
options="Default Bar\nMinimal Bar\nBattery Saver\nUpdate Menu\nExit"

chosen="$(echo -e "$options" | $rofi_command -p 'Tools' -dmenu -selected-row 0 )"
case $chosen in
    "Default Bar")
		sed -i 's/^bar_style=.*/bar_style=base/' "$HOME"/.zprofile
   		if [ "$XDG_SESSION_TYPE" == "x11" ];then
			"$HOME"/.config/polybar/launch.sh
			pkill stalonetray && "$HOME"/.config/polybar/scripts/systray &
		else 
			"$HOME"/.config/waybar/launch_waybar
		fi
        ;;
    "Minimal Bar")
   		sed -i 's/^bar_style=.*/bar_style=minimal/' "$HOME"/.zprofile
   		if [ "$XDG_SESSION_TYPE" == "x11" ];then
			"$HOME"/.config/polybar/launch.sh
			pkill stalonetray && "$HOME"/.config/polybar/scripts/systray &
			pkill conky
		else
			"$HOME"/.config/waybar/launch_waybar
		fi
        ;;
    "Battery Saver")
		"$HOME"/.config/eww/scripts/battery toggle
        ;;
    "Update Menu")
		"$HOME"/.scripts/dots-update.sh
        ;;
    "Exit")
		exit
        ;;
esac
